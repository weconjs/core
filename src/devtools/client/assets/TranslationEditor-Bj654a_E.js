import{c as $,j as e,A as H,m as u,b as q,r as d,u as U,d as X,a as L,X as _}from"./index-DoHRi03N.js";import{L as T}from"./loader-circle-DoOjJ8vr.js";import{A as B,S as J}from"./save-CV1xmSXO.js";import{P as Q}from"./plus-Ca-xq8y8.js";import{S as W}from"./search-CpTZ4fXm.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=$("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function ee({open:n,title:a,message:i,confirmLabel:o="Confirm",onConfirm:s,onCancel:r}){return e.jsx(H,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black/40",onClick:r}),e.jsxs(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"fixed left-1/2 top-1/2 z-50 w-full max-w-sm -translate-x-1/2 -translate-y-1/2 rounded-primary border border-primary bg-secondary p-6 shadow-heavy",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-primary",children:a}),e.jsx("p",{className:"mb-6 text-sm text-secondary",children:i}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"rounded-secondary border border-primary px-4 py-2 text-sm text-primary transition-colors hover:bg-primary",children:"Cancel"}),e.jsx("button",{onClick:s,className:"rounded-secondary bg-red-500 px-4 py-2 text-sm font-medium text-white transition-opacity hover:opacity-90",children:o})]})]})]})})}function D(n,a=""){const i={};for(const[o,s]of Object.entries(n)){const r=a?`${a}.${o}`:o;s!==null&&typeof s=="object"&&!Array.isArray(s)?Object.assign(i,D(s,r)):i[r]=String(s??"")}return i}function te(n){const a={};for(const[i,o]of Object.entries(n)){const s=i.split(".");let r=a;for(let m=0;m<s.length-1;m++)(r[s[m]]===void 0||typeof r[s[m]]!="object")&&(r[s[m]]={}),r=r[s[m]];r[s[s.length-1]]=o}return a}function oe(){const{namespace:n,lang:a}=q(),[i,o]=d.useState({}),[s,r]=d.useState(!0),[m,w]=d.useState(!1),[O,f]=d.useState(!1),[x,V]=d.useState(""),[C,y]=d.useState(!1),[S,j]=d.useState(""),[K,v]=d.useState(""),[z,p]=d.useState(""),[h,N]=d.useState(null),R=U(),{addToast:b}=X();d.useEffect(()=>{!n||!a||L.get(`/i18n/${n}/${a}`).then(t=>{var c;const l=((c=t.data)==null?void 0:c.translations)??t.data??{};o(D(l))}).catch(console.error).finally(()=>r(!1))},[n,a]);const F=(t,l)=>{o(c=>({...c,[t]:l})),f(!0)},M=async()=>{if(!(!n||!a)){w(!0);try{const t=te(i);await L.put(`/i18n/${n}/${a}`,t),f(!1),b({type:"success",message:"Translations saved"})}catch{b({type:"error",message:"Failed to save translations"})}finally{w(!1)}}},k=()=>{const t=S.trim();if(!t){p("Key is required");return}if(i[t]!==void 0){p("Key already exists");return}o(l=>({...l,[t]:K})),f(!0),j(""),v(""),p(""),y(!1),b({type:"info",message:`Added key "${t}"`})},P=t=>{o(l=>{const c={...l};return delete c[t],c}),f(!0),N(null),b({type:"info",message:`Removed key "${t}"`})};if(s)return e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(T,{className:"size-8 animate-spin text-primary"})});const g=Object.entries(i),A=x?g.filter(([t,l])=>t.toLowerCase().includes(x.toLowerCase())||l.toLowerCase().includes(x.toLowerCase())):g;let E="";return e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex size-full flex-col gap-5 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>R("/i18n"),className:"flex size-8 items-center justify-center rounded-secondary border border-primary transition-colors hover:bg-primary",children:e.jsx(B,{className:"size-4 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-primary",children:[n," / ",a==null?void 0:a.toUpperCase()]}),e.jsxs("p",{className:"text-sm text-secondary",children:[g.length," keys"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!C&&e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-1.5 rounded-secondary border border-dashed border-primary px-3 py-1.5 text-xs text-secondary transition-colors hover:bg-primary hover:text-primary",children:[e.jsx(Q,{className:"size-3"}),"Add Key"]}),O&&e.jsxs(u.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileTap:{scale:.95},onClick:M,disabled:m,className:"flex items-center gap-2 rounded-secondary bg-btn-primary px-4 py-2 text-sm font-medium text-btn-primary transition-opacity hover:opacity-90 disabled:opacity-50",children:[m?e.jsx(T,{className:"size-4 animate-spin"}):e.jsx(J,{className:"size-4"}),"Save"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-secondary"}),e.jsx("input",{type:"text",placeholder:"Search keys or values...",value:x,onChange:t=>V(t.target.value),className:"w-full rounded-secondary border border-primary bg-secondary py-2 pl-9 pr-4 text-sm text-primary outline-none focus:border-blue-500"})]}),C&&e.jsx(u.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"rounded-secondary border-2 border-dashed border-blue-300 bg-secondary p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary",children:"Key"}),e.jsx("input",{type:"text",value:S,onChange:t=>{j(t.target.value),p("")},onKeyDown:t=>{t.key==="Enter"&&k(),t.key==="Escape"&&y(!1)},placeholder:"group.translation_key",autoFocus:!0,className:"w-full rounded-tertiary border border-primary bg-primary px-3 py-1.5 text-sm text-primary outline-none focus:border-blue-500"}),z&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:z})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary",children:"Value"}),e.jsx("input",{type:"text",value:K,onChange:t=>v(t.target.value),onKeyDown:t=>{t.key==="Enter"&&k(),t.key==="Escape"&&y(!1)},placeholder:"Translation text",className:"w-full rounded-tertiary border border-primary bg-primary px-3 py-1.5 text-sm text-primary outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:k,className:"rounded-secondary bg-btn-primary px-4 py-1.5 text-sm font-medium text-btn-primary transition-opacity hover:opacity-90",children:"Add"}),e.jsx("button",{onClick:()=>{y(!1),j(""),v(""),p("")},className:"rounded-secondary p-1.5 transition-colors hover:bg-primary",children:e.jsx(_,{className:"size-4 text-secondary"})})]})]})}),A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-12",children:[e.jsx(Y,{className:"size-10 text-secondary"}),e.jsx("p",{className:"text-sm text-secondary",children:g.length===0?'No translation keys yet. Click "Add Key" to get started.':"No keys match your search."})]}):e.jsx("div",{className:"flex flex-col gap-1.5",children:A.map(([t,l])=>{const c=t.split(".")[0],I=!x&&c!==E;return x||(E=c),e.jsxs("div",{children:[I&&t.includes(".")&&e.jsx("div",{className:"mb-1 mt-4 first:mt-0",children:e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-secondary",children:c})}),e.jsxs("div",{className:"group flex items-center gap-3 rounded-secondary border border-primary bg-secondary p-3",children:[e.jsx("label",{className:"min-w-[200px] shrink-0 font-mono text-xs font-semibold text-primary",children:t.includes(".")?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-secondary",children:t.substring(0,t.lastIndexOf(".")+1)}),t.substring(t.lastIndexOf(".")+1)]}):t}),e.jsx("input",{type:"text",value:l,onChange:G=>F(t,G.target.value),className:"w-full rounded-tertiary border border-primary bg-primary px-3 py-1.5 text-sm text-primary outline-none focus:border-blue-500"}),e.jsx("button",{onClick:()=>N(t),className:"shrink-0 rounded-tertiary p-1.5 text-secondary opacity-0 transition-all hover:bg-red-50 hover:text-red-500 group-hover:opacity-100",children:e.jsx(Z,{className:"size-3.5"})})]})]},t)})}),e.jsx(ee,{open:h!==null,title:"Delete translation key",message:`Remove "${h}" from this translation file? Save to persist the change.`,confirmLabel:"Delete",onConfirm:()=>h&&P(h),onCancel:()=>N(null)})]})}export{oe as default};
